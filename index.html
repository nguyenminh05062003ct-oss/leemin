<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Th·ªëng K√™ Ph√¢n Lo·∫°i √Åo</title>
  <script src="https://js.pusher.com/8.2/pusher.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    h1 {
      color: #003366;
      margin-bottom: 20px;
    }
    table {
      margin: 20px auto;
      border-collapse: collapse;
      width: 60%;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    th, td {
      border: 1px solid #ccc;
      padding: 12px;
      font-size: 18px;
    }
    th {
      background: #003366;
      color: white;
    }
    td.count {
      font-weight: bold;
      color: #003366;
    }
  </style>
</head>
<body>
  <h1>üìä Th·ªëng K√™ Ph√¢n Lo·∫°i √Åo</h1>

  <table>
    <thead>
      <tr>
        <th>Lo·∫°i √Åo</th>
        <th>S·ªë L∆∞·ª£ng</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>√Åo s·ªçc d·ªçc</td>
        <td id="doc-count" class="count">0</td>
      </tr>
      <tr>
        <td>√Åo s·ªçc ngang</td>
        <td id="ngang-count" class="count">0</td>
      </tr>
      <tr>
        <td>√Åo tr∆°n</td>
        <td id="tron-count" class="count">0</td>
      </tr>
    </tbody>
  </table>

  <script>
    // Bi·∫øn ƒë·∫øm
    let counters = { doc: 0, ngang: 0, tron: 0 };

    // Pusher config v·ªõi app_key c·ªßa b·∫°n
    Pusher.logToConsole = false;
    var pusher = new Pusher('5dd6bcc64fd5e7e49474', { cluster: 'ap1' });
    var channel = pusher.subscribe('my-channel');

    // Nh·∫≠n d·ªØ li·ªáu t·ª´ server Python
    channel.bind('my-event', function(data) {
      let shirt = data.shirt;
      if (shirt === "√Åo s·ªçc d·ªçc") {
        counters.doc++;
        document.getElementById("doc-count").textContent = counters.doc;
      } else if (shirt === "√Åo s·ªçc ngang") {
        counters.ngang++;
        document.getElementById("ngang-count").textContent = counters.ngang;
      } else if (shirt === "√Åo tr∆°n") {
        counters.tron++;
        document.getElementById("tron-count").textContent = counters.tron;
      }
    });

    // Reset t·ª´ Python (trigger reset-event)
    channel.bind('reset-event', function(data) {
      counters = { doc: 0, ngang: 0, tron: 0 };
      document.getElementById("doc-count").textContent = 0;
      document.getElementById("ngang-count").textContent = 0;
      document.getElementById("tron-count").textContent = 0;
      console.log("üîÑ ƒê√£ reset t·ª´ Python ‚Üí Web");
    });
  </script>
</body>
</html>
